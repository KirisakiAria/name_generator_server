(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bcdae"],{"2a09":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"table-page"},[a("section",{staticClass:"top-area"},[a("div",{staticClass:"form"},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.form.searchContent,callback:function(t){e.$set(e.form,"searchContent",t)},expression:"form.searchContent"}}),a("el-select",{attrs:{placeholder:"请选择类型"},on:{change:e.getData},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"中国风",value:"中国风"}}),a("el-option",{attrs:{label:"日语",value:"日语"}})],1),a("el-select",{attrs:{placeholder:"请选择字数"},on:{change:e.getData},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}},e._l(5,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getData}},[e._v(" 搜索 ")])],1),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增")])],1)]),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"_id",label:"ID"}}),a("el-table-column",{attrs:{prop:"word",label:"词语"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.editItem(t.row)}}}),a("el-popconfirm",{staticClass:"pop-confirm",attrs:{confirmButtonText:"好的",cancelButtonText:"不用了",icon:"el-icon-info",iconColor:"red",title:"确定删除吗？"},on:{onConfirm:function(a){return e.deleteItem(t.row)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)]}}])})],1),a("section",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.currentPage,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.getData}})],1),e.dialogVisible?a("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("EditWord",{attrs:{id:e.selectedItemId,word:e.selectedItemWord,type:e.form.type},on:{success:e.getData,close:e.closeDialog}})],1):e._e()],1)},o=[],s=(a("99af"),a("96cf"),a("1da1")),n=a("e09c"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"edit-page"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择类型",disabled:!!e.id},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"中国风",value:"中国风"}}),a("el-option",{attrs:{label:"日语",value:"日语"}})],1)],1),a("el-form-item",{attrs:{label:"词语",prop:"word"}},[a("el-input",{model:{value:e.form.word,callback:function(t){e.$set(e.form,"word",t)},expression:"form.word"}})],1),e.id?e._e():a("el-form-item",{attrs:{label:"导入"}},[a("el-upload",{attrs:{drag:"",headers:e.API.headers,action:e.url+e.API.upload,"on-success":e.uploadSuccess,multiple:"","before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传txt文件 ")])])],1),a("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)},l=[],c={name:"EditWord",mixins:[n["a"]],data:function(){return{form:{type:"日语",word:""},rules:{type:[{required:!0,message:"请选择类型"}],word:[{required:!0,message:"请填写词语"}]},fileList:[]}},props:{id:{type:String,default:""},type:{type:String,default:""},word:{type:String,default:""}},computed:{url:function(){return"/"}},methods:{beforeUpload:function(e){return"text/plain"===e.type&&(this.$refs.form.validateField("type"),!!this.form.type&&void 0)},uploadSuccess:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("1000"!=e.code){a.next=5;break}return a.next=3,t.$post(t.API.uploadWordList,{type:t.form.type,path:e.data.path});case 3:r=a.sent,"1000"==r.data.code&&t.$message({showClose:!0,message:r.data.message,type:"success"});case 5:case"end":return a.stop()}}),a)})))()},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=14;break}if(!e.id){t.next=8;break}return t.next=4,e.$put("".concat(e.API.word,"/").concat(e.id),e.form);case 4:r=t.sent,"1000"==r.data.code&&(e.$message({showClose:!0,message:r.data.message,type:"success"}),e.$emit("close")),t.next=12;break;case 8:return t.next=10,e.$post(e.API.word,e.form);case 10:o=t.sent,"1000"==o.data.code&&(e.$message({showClose:!0,message:o.data.message,type:"success"}),e.$emit("success"));case 12:t.next=15;break;case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},created:function(){if(this.id)this.form.type=this.type,this.form.word=this.word;else{var e=this.$route.query.type;e&&(this.form.type=e)}}},u=c,d=a("2877"),p=Object(d["a"])(u,i,l,!1,null,null,null),m=p.exports,f={name:"WordList",mixins:[n["a"]],data:function(){return{dialogVisible:!1,selectedItemId:"",selectedItemWord:"",form:{type:"日语",number:4,searchContent:""},pageSize:15,currentPage:1,total:0,tableData:[]}},components:{EditWord:m},methods:{add:function(){this.selectedItemId="",this.selectedItemWord="",this.dialogVisible=!0},editItem:function(e){this.selectedItemId=e._id,this.selectedItemWord=e.word,this.dialogVisible=!0},deleteItem:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$delete("".concat(t.API.word,"/").concat(e._id),{params:{type:t.form.type,number:t.form.number}});case 2:r=a.sent,"1000"==r.data.code&&(t.$message({showClose:!0,message:r.data.message,type:"success"}),t.getData());case 4:case"end":return a.stop()}}),a)})))()},getData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get(e.API.word,{params:{type:e.form.type,number:e.form.number,searchContent:e.form.searchContent,pageSize:e.pageSize,currentPage:e.currentPage-1}});case 2:a=t.sent,"1000"==a.data.code&&(e.tableData=a.data.data.list,e.total=a.data.data.total);case 4:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.dialogVisible=!1,this.getData()}},created:function(){this.getData()}},g=f,b=Object(d["a"])(g,r,o,!1,null,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d0bcdae.2566855d.js.map