(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa29de36"],{"1faf":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"table-page"},[a("section",{staticClass:"top-area"},[a("div",{staticClass:"form"},[a("el-input",{attrs:{placeholder:"请输入要搜索的手机号"},model:{value:e.form.searchContent,callback:function(t){e.$set(e.form,"searchContent",t)},expression:"form.searchContent"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getData}},[e._v(" 搜索 ")])],1),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增")])],1)]),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"avatare",label:"头像",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:""+e.url+t.row.avatar}})]}}])}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"220"}}),a("el-table-column",{attrs:{prop:"uid",label:"UID",width:"100"}}),a("el-table-column",{attrs:{prop:"tel",label:"手机号"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"date",label:"注册日期"}}),a("el-table-column",{attrs:{prop:"vip_start",label:"VIP开始时间"}}),a("el-table-column",{attrs:{prop:"vip_expiry",label:"VIP过期时间"}}),a("el-table-column",{attrs:{prop:"vip",label:"是否VIP"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.vip?"是":"否")+" ")]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.editItem(t.row)}}}),a("el-popconfirm",{staticClass:"pop-confirm",attrs:{confirmButtonText:"好的",cancelButtonText:"不用了",icon:"el-icon-info",iconColor:"red",title:"确定删除吗？"},on:{onConfirm:function(a){return e.deleteItem(t.row)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)]}}])})],1),a("section",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.currentPage,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.getData}})],1),e.dialogVisible?a("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("EditUser",{attrs:{item:e.selectedItem},on:{close:e.closeDialog}})],1):e._e()],1)},s=[],n=(a("99af"),a("96cf"),a("1da1")),l=a("e09c"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"edit-page"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,headers:e.API.headers,action:e.url+e.API.upload,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload}},[e.form.avatar?a("img",{staticClass:"avatar",attrs:{src:e.url+e.form.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"手机号",prop:"tel"}},[a("el-input",{attrs:{type:"number",maxlength:"11"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{maxlength:"10"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{maxlength:"10"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"是否VIP",prop:"vip"}},[a("el-select",{attrs:{placeholder:"请选择是否VIP"},model:{value:e.form.vip,callback:function(t){e.$set(e.form,"vip",t)},expression:"form.vip"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)],1),a("el-form-item",{attrs:{label:"VIP开始时间"}},[a("el-input",{model:{value:e.form.vip_start,callback:function(t){e.$set(e.form,"vip_start",t)},expression:"form.vip_start"}})],1),a("el-form-item",{attrs:{label:"VIP过期时间"}},[a("el-input",{model:{value:e.form.vip_expiry,callback:function(t){e.$set(e.form,"vip_expiry",t)},expression:"form.vip_expiry"}})],1),a("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)},i=[],c=(a("caad"),a("2532"),{name:"EditUser",mixins:[l["a"]],data:function(){return{form:{avatar:"",tel:"",username:"",password:"",vip:"",vip_start:"",vip_expiry:""},rules:{tel:[{required:!0,message:"请填写手机号"}],username:[{required:!0,message:"请填写用户名"}],password:[{required:!0,message:"请填写密码"}],vip:[{required:!0,message:"请选择是否是vip"}]},fileList:[]}},props:{item:{type:Object,default:null}},computed:{url:function(){return"/"}},methods:{beforeUpload:function(e){if(!e.type.includes("image"))return!1},uploadSuccess:function(e){"1000"==e.code&&(this.form.avatar=e.data.path)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=14;break}if(!e.item){t.next=8;break}return t.next=4,e.$put("".concat(e.API.user,"/").concat(e.item._id),e.form);case 4:r=t.sent,"1000"==r.data.code&&(e.$message({showClose:!0,message:r.data.message,type:"success"}),e.$emit("close")),t.next=12;break;case 8:return t.next=10,e.$post(e.API.user,e.form);case 10:s=t.sent,"1000"==s.data.code&&(e.$message({showClose:!0,message:s.data.message,type:"success"}),e.$emit("close"));case 12:t.next=15;break;case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},created:function(){this.item&&(this.form=this.item)}}),u=c,p=(a("9034"),a("2877")),m=Object(p["a"])(u,o,i,!1,null,null,null),d=m.exports,f={name:"UserList",mixins:[l["a"]],data:function(){return{dialogVisible:!1,selectedItem:null,form:{searchContent:""},pageSize:15,currentPage:1,total:0,tableData:[]}},components:{EditUser:d},computed:{url:function(){return"/"}},methods:{add:function(){this.selectedItem=null,this.dialogVisible=!0},editItem:function(e){this.selectedItem=e,this.dialogVisible=!0},deleteItem:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$delete("".concat(t.API.user,"/").concat(e._id),{params:{tel:e.tel}});case 2:r=a.sent,"1000"==r.data.code&&(t.$message({showClose:!0,message:r.data.message,type:"success"}),t.getData());case 4:case"end":return a.stop()}}),a)})))()},getData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$get(e.API.user,{params:{searchContent:e.form.searchContent,pageSize:e.pageSize,currentPage:e.currentPage-1}});case 2:a=t.sent,"1000"==a.data.code&&(e.tableData=a.data.data.list,e.total=a.data.data.total);case 4:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.dialogVisible=!1,this.getData()}},created:function(){this.getData()}},b=f,g=(a("b146"),Object(p["a"])(b,r,s,!1,null,"26a85464",null));t["default"]=g.exports},9034:function(e,t,a){"use strict";var r=a("d3e3"),s=a.n(r);s.a},a0f8:function(e,t,a){},b146:function(e,t,a){"use strict";var r=a("a0f8"),s=a.n(r);s.a},d3e3:function(e,t,a){}}]);
//# sourceMappingURL=chunk-aa29de36.85dd81c4.js.map